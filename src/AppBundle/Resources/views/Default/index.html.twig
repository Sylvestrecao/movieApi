{% extends("layout/layout.html.twig") %}
{% block body %}
    <!-- Header Carousel -->
    <header id="myCarousel" class="carousel slide">
        <!-- Indicators -->
        <ol class="carousel-indicators">
            {% set isFirstSlide = true %}
            {% for i in 0..nowPlayingMovies.body.results|length - 1 %}
                <li data-target="#myCarousel" data-slide-to="{{ i }}" class="{% if isFirstSlide == true %} active {% endif %}"></li>
                {% set isFirstSlide = false %}
            {% endfor %}
        </ol>

        <!-- Wrapper for slides -->
        {% set isFirst = true %}
        <div class="carousel-inner">
            {% for nowPlayingMovie in nowPlayingMovies.body.results %}
                <div class="item {% if isFirst == true %} active {% endif %}">
                    <div class="fill" style="background-image:url('https://image.tmdb.org/t/p/original{{ nowPlayingMovie.backdrop_path }}');"></div>
                    <div class="carousel-caption">
                        <h2>{{ nowPlayingMovie.title }}</h2>
                    </div>
                </div>
                {% set isFirst = false %}
            {% endfor %}
        </div>

        <!-- Controls -->
        <a class="left carousel-control" href="#myCarousel" data-slide="prev">
            <span class="icon-prev"></span>
        </a>
        <a class="right carousel-control" href="#myCarousel" data-slide="next">
            <span class="icon-next"></span>
        </a>
    </header>
    <!-- Page Content -->
    <div class="container">
        <div class="row mg-t-50">
            <div class="col-md-12">
                <ul class="nav nav-tabs">
                    <li class="active"><a href="#nowPlaying" data-toggle="tab">Films à l'affiche</a></li>
                    <li class=""><a href="#popular" data-toggle="tab">Films populaires</a></li>
                    <li class=""><a href="#upcoming" data-toggle="tab">Prochainement</a></li>
                    <li class=""><a href="#topRated" data-toggle="tab">Films les mieux notés</a></li>
                </ul>
                <div id="myTabContent" class="tab-content mg-t-50">
                    <div class="tab-pane fade active in" id="nowPlaying">
                        <div class="row">
                            {{ render(controller('AppBundle:Movie:includeMovieResults', {listMovies: nowPlayingMovies})) }}
                        </div>
                    </div>
                    <div class="tab-pane fade" id="popular">
                        <div class="row">
                            {{ render(controller('AppBundle:Movie:includeMovieResults', {listMovies: popularMovies})) }}
                        </div>
                    </div>
                    <div class="tab-pane fade" id="upcoming">
                        <div class="row">
                            {{ render(controller('AppBundle:Movie:includeMovieResults', {listMovies: upcomingMovies})) }}
                        </div>
                    </div>
                    <div class="tab-pane fade" id="topRated">
                        <div class="row">
                            {{ render(controller('AppBundle:Movie:includeMovieResults', {listMovies: topRatedMovies})) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <!-- /.container -->

{% endblock %}

{% block script %}
    <!-- Script to Activate the Carousel -->
    <script>
        $('.carousel').carousel({
            interval: 5000 //changes the speed
        })
    </script>
{% endblock %}